<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- EDIT THIS SECTION: Change the title for each course -->
    <title>FLAMEA Training - Newborn & Daily Care Skills</title>
    
    <!-- External Styles and Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@700&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <meta http-equiv="Content-Security-Policy" content="
    default-src 'none';
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com;
    script-src 'self' https://cdn.tailwindcss.com;
    font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com;
    img-src 'self' data:;
    connect-src 'self';
">
    
    <!-- Correct, root-relative path to your custom stylesheet -->
        <link href="/assets/css/style.min.css" rel="stylesheet">
    <script type="module" src="/assets/js/main.js"></script>
    
    <!-- Internal Styles for layout and course-specific elements -->
    <style>
        body { font-family: 'Open Sans', sans-serif; }
        .main-container { display: flex; min-height: 100vh; }
        .main-content { flex-grow: 1; overflow-y: auto; position: relative; }
        #background-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        
        /* Styles for this specific course */
        .topic-card, .level-card { border: 2px solid transparent; transition: all 0.3s ease; cursor: pointer; }
        .topic-card:hover, .level-card:hover { transform: translateY(-5px); border-color: #f59e0b; }
        .topic-card.selected, .level-card.selected { border-color: #f59e0b; background-color: rgba(245, 158, 11, 0.1); }
        .quiz-container, .course-container, #end-screen { background-color: rgba(30, 41, 59, 0.9); backdrop-filter: blur(8px); }
        .ndebele-border { border: 10px solid; border-image-slice: 1; border-width: 10px; border-image-source: linear-gradient(to left, #f59e0b, #ef4444, #3b82f6, #10b981); }
        .btn-primary { background-color: #16a34a; color: white; }
        .btn-primary:hover { background-color: #15803d; }
        .btn-secondary { background-color: #475569; color: white; }
        .btn-secondary:hover { background-color: #334155; }
        .btn { padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 700; text-transform: uppercase; transition: all 0.2s ease; }

    </style>
</head>
<body class="bg-gray-900 text-gray-200 font-sans flex">

    <aside id="training-sidebar-placeholder" class="w-64 h-screen sticky top-0"></aside>
    
    <div class="flex-1 flex flex-col">
        <main class="main-content p-4 md:p-8 flex items-center justify-center">
            
            <div id="course-hub" class="max-w-4xl mx-auto text-center">
                <header class="mb-12">
                     <div class="flex justify-center items-center gap-4 mb-4">
                        <svg class="h-20 w-20 text-purple-400" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2.5-4.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zm5 0c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM12 6c-1.93 0-3.5 1.57-3.5 3.5 0 .5.1.98.28 1.42.48 1.19 1.63 2.08 2.97 2.08h.5c1.34 0 2.49-.89 2.97-2.08.18-.44.28-.92.28-1.42C15.5 7.57 13.93 6 12 6z"/>
                        </svg>
                        <h1 class="text-4xl md:text-5xl font-bold font-roboto-slab text-white">Newborn & Daily Care Skills</h1>
                    </div>
                    <p class="text-lg text-gray-300">Gain the confidence and practical skills to be an exceptional hands-on father from day one.</p>
                </header>

                <section id="module-selection-section">
                    <h2 class="text-2xl font-bold text-center text-orange-400 mb-6">Choose a Module to Begin</h2>
                    <div id="module-selection" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="module-card bg-slate-800/80 p-6 rounded-xl cursor-pointer" data-module="1">
                            <h3 class="text-xl font-bold text-white mb-2">The First Days</h3>
                            <p class="text-gray-400 text-sm">Learn about your role, leveraging your family, and mastering the basics of newborn care.</p>
                        </div>
                        <div class="module-card bg-slate-800/80 p-6 rounded-xl cursor-pointer" data-module="2">
                            <h3 class="text-xl font-bold text-white mb-2">Health & Safety</h3>
                            <p class="text-gray-400 text-sm">Understand safe sleeping, feeding practices, and when to call a doctor.</p>
                        </div>
                        <div class="module-card bg-slate-800/80 p-6 rounded-xl cursor-pointer" data-module="3">
                            <h3 class="text-xl font-bold text-white mb-2">Father's Role in Development</h3>
                            <p class="text-gray-400 text-sm">Discover the importance of play, communication, and your unique bond with your child.</p>
                        </div>
                    </div>
                </section>
            </div>
            
            <div id="content-area" class="w-full max-w-4xl mx-auto hidden">
                <div id="module-content" class="prose max-w-none prose-invert mb-8 bg-slate-800/70 p-6 rounded-lg"></div>
                <button id="start-quiz-btn" class="btn btn-primary w-full">Test Your Skills</button>
                <section id="quiz-section" class="quiz-section mt-8 p-8 rounded-lg hidden"></section>
                <div id="end-screen" class="end-screen mt-8 p-8 rounded-lg hidden text-center"></div>
                <button id="back-to-hub-btn" class="btn btn-secondary mt-4">Back to Modules</button>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetch('/training-sidebar.html')
                .then(response => response.text())
                .then(html => {
                    const placeholder = document.getElementById('training-sidebar-placeholder');
                    if (placeholder) {
                        placeholder.innerHTML = html;
                        const scriptEl = placeholder.querySelector('script');
                        if (scriptEl) eval(scriptEl.innerHTML);
                    }
                }).catch(error => console.error('Error fetching training sidebar:', error));

            const courseHub = document.getElementById('course-hub');
            const contentArea = document.getElementById('content-area');
            const moduleContentEl = document.getElementById('module-content');
            const quizSection = document.getElementById('quiz-section');
            const startQuizBtn = document.getElementById('start-quiz-btn');
            const backToHubBtn = document.getElementById('back-to-hub-btn');
            const endScreen = document.getElementById('end-screen');
            const moduleCards = document.querySelectorAll('.module-card');

            const courseContent = {
                1: {
                    title: 'Module 1: The First Days - Your Role as a Father',
                    content: `
                        <p>Becoming a father is a profound transformation. The first few days and weeks with your newborn are crucial for bonding and establishing your role as an active, capable parent. This module will equip you with the foundational knowledge to navigate this special time with confidence.</p>
                        <h3>Your Greatest Asset: The Extended Family</h3>
                        <p>In South Africa, our greatest strength is our family. Many men live in multi-generational homes. <strong>This is not a weakness; it is your ultimate support system.</strong> When you go to work, the child's grandmother (Gogo/Makhulu), who raised you, is there. This collaboration is your strength.</p>
                        <h3>The Basics of Newborn Care</h3>
                        <p>Confidence comes from competence. Mastering these basic tasks will empower you:</p>
                        <ul><li><strong>Holding Your Baby:</strong> Always support the head and neck.</li><li><strong>Changing a Nappy:</strong> Have everything ready before you start.</li><li><strong>Burping:</strong> Gently pat your babyâ€™s back after feeding to release trapped air.</li></ul>
                    `,
                    questions: [
                        { q: "What is a father's greatest support system according to this module?", a: "The extended family (Gogo, aunts, etc.)", o: ["The hospital nurses", "Parenting books"] },
                        { q: "When holding a newborn, what is the most important thing to support?", a: "The head and neck", o: ["The feet", "The hands"] }
                    ]
                },
                2: {
                    title: "Module 2: Health & Safety",
                    content: `
                        <h3>Safe Sleep</h3>
                        <p>Always place your baby on their <strong>back</strong> to sleep, in a cot or bassinet with a firm mattress and no loose bedding, pillows, or toys. This significantly reduces the risk of Sudden Infant Death Syndrome (SIDS).</p>
                        <h3>Feeding and Hygiene</h3>
                        <p>Whether bottle-feeding or supporting breastfeeding, hygiene is key. Always wash your hands before handling bottles or feeding your baby. Sterilize bottles and equipment properly.</p>
                        <h3>When to Worry</h3>
                        <p>Trust your instincts. If your baby has a persistent fever, is unusually lethargic, has trouble breathing, or is not feeding well, do not hesitate to contact your clinic or doctor.</p>
                    `,
                    questions: [
                        { q: "What is the safest sleeping position for a newborn?", a: "On their back", o: ["On their stomach", "On their side"] },
                        { q: "What is a key reason to call a doctor for a newborn?", a: "A persistent fever or difficulty breathing", o: ["Crying loudly", "Hiccups after feeding"] }
                    ]
                },
                3: {
                    title: "Module 3: Father's Role in Development",
                    content: `
                        <h3>The Power of Play</h3>
                        <p>Play is how babies learn. Even simple interactions like making faces, singing songs, or "tummy time" on a play mat stimulate your baby's brain development. You don't need expensive toys; you are your baby's favorite toy.</p>
                        <h3>Your Voice Matters</h3>
                        <p>Talk to your baby constantly. Narrate what you are doing. The sound of your voice is comforting and is crucial for their language development. A father's deeper voice provides a different and important auditory experience for a baby.</p>
                        <h3>The Father's Bond</h3>
                        <p>The bond you build now will last a lifetime. Skin-to-skin contact, holding your baby, and being actively involved in their care releases hormones in both you and the baby that strengthen your connection. You are an essential, irreplaceable part of your child's life.</p>
                    `,
                    questions: [
                        { q: "Why is talking to your baby important?", a: "It is crucial for their language development", o: ["It teaches them to be quiet", "It only matters if you sing"] },
                        { q: "What is a simple way to stimulate a baby's brain development?", a: "Simple play and making faces", o: ["Buying expensive electronic toys", "Letting them watch TV"] }
                    ]
                }
            };

            let currentModuleData = {};
            let currentQuestionIndex = 0;
            let score = 0;
            
            function displayModule(moduleNum) {
                currentModuleData = courseContent[moduleNum];
                courseHub.classList.add('hidden');
                contentArea.classList.remove('hidden');
                quizSection.classList.add('hidden');
                endScreen.classList.add('hidden');
                startQuizBtn.classList.remove('hidden');
                moduleContentEl.innerHTML = `<h2>${currentModuleData.title}</h2>${currentModuleData.content}`;
            }
            
            function setupQuiz() {
                startQuizBtn.classList.add('hidden');
                quizSection.classList.remove('hidden');
                currentQuestionIndex = 0;
                score = 0;
                loadQuestion();
            }

            function loadQuestion() {
                const questionData = currentModuleData.questions[currentQuestionIndex];
                let optionsHTML = shuffleArray([...questionData.o, questionData.a])
                    .map(opt => `<div class="quiz-option p-3 rounded-lg border border-gray-600 hover:bg-slate-700 cursor-pointer" data-answer="${opt === questionData.a}">${opt}</div>`)
                    .join('');
                quizSection.innerHTML = `<p class="font-semibold text-lg mb-4">${currentQuestionIndex + 1}. ${questionData.q}</p><div class="space-y-3">${optionsHTML}</div><div class="feedback mt-4 text-sm p-3 rounded-lg"></div>`;
            }

            function handleAnswerClick(e) {
                if (!e.target.classList.contains('quiz-option')) return;
                const selectedOption = e.target;
                const isCorrect = selectedOption.dataset.answer === 'true';
                const feedbackDiv = quizSection.querySelector('.feedback');
                
                quizSection.querySelectorAll('.quiz-option').forEach(opt => opt.style.pointerEvents = 'none');

                if (isCorrect) {
                    selectedOption.classList.add('bg-green-500/50', 'border-green-500');
                    feedbackDiv.innerHTML = '<p class="text-green-400 font-bold">Correct! You are a capable and confident father.</p>';
                    score++;
                } else {
                    selectedOption.classList.add('bg-red-500/50', 'border-red-500');
                    feedbackDiv.innerHTML = '<p class="text-red-400 font-bold">Not quite. Review the module and try again.</p>';
                }

                setTimeout(() => {
                    currentQuestionIndex++;
                    if (currentQuestionIndex < currentModuleData.questions.length) {
                        loadQuestion();
                    } else {
                        showEndScreen();
                    }
                }, 2000);
            }

            function showEndScreen() {
                quizSection.classList.add('hidden');
                endScreen.classList.remove('hidden');
                endScreen.innerHTML = `<h2 class="text-2xl font-bold font-roboto-slab text-green-400">Module Complete!</h2><p class="text-lg mt-2">You scored ${score} out of ${currentModuleData.questions.length}.</p><p class="mt-4">You have the foundational skills to care for your newborn!</p>`;
            }
            
            function goBackToHub() {
                contentArea.classList.add('hidden');
                courseHub.classList.remove('hidden');
                moduleCards.forEach(c => c.classList.remove('selected'));
            }

            function shuffleArray(array) { return [...array].sort(() => Math.random() - 0.5); }

            moduleCards.forEach(card => card.addEventListener('click', () => {
                selectCard(card, 'module');
                displayModule(parseInt(card.dataset.module));
            }));
            startQuizBtn.addEventListener('click', setupQuiz);
            quizSection.addEventListener('click', handleAnswerClick);
            backToHubBtn.addEventListener('click', goBackToHub);
            
            function selectCard(card, cardType) {
                document.querySelectorAll(`.${cardType}-card`).forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
            }
        });
    </script>
</body>
</html>
