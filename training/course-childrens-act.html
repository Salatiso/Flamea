<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- EDIT THIS SECTION: Change the title for each course -->
    <title>FLAMEA Training - The Children's Act: A Father's Armoury</title>
    
    <!-- External Styles and Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@700&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <meta http-equiv="Content-Security-Policy" content="
    default-src 'none';
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com;
    script-src 'self' https://cdn.tailwindcss.com;
    font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com;
    img-src 'self' data:;
    connect-src 'self';
">
    
    <!-- Correct, root-relative path to your custom stylesheet -->
        <link href="/assets/css/style.min.css" rel="stylesheet">
    <script type="module" src="/assets/js/main.js"></script>
    
    <!-- Internal Styles for layout and course-specific elements -->
    <style>
        body { font-family: 'Open Sans', sans-serif; }
        .main-container { display: flex; min-height: 100vh; }
        .main-content { flex-grow: 1; overflow-y: auto; position: relative; }
        #background-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        
        /* Styles for this specific course */
        .topic-card, .level-card { border: 2px solid transparent; transition: all 0.3s ease; cursor: pointer; }
        .topic-card:hover, .level-card:hover { transform: translateY(-5px); border-color: #f59e0b; }
        .topic-card.selected, .level-card.selected { border-color: #f59e0b; background-color: rgba(245, 158, 11, 0.1); }
        .quiz-container, .course-container, #end-screen { background-color: rgba(30, 41, 59, 0.9); backdrop-filter: blur(8px); }
        .ndebele-border { border: 10px solid; border-image-slice: 1; border-width: 10px; border-image-source: linear-gradient(to left, #f59e0b, #ef4444, #3b82f6, #10b981); }
        .btn-primary { background-color: #16a34a; color: white; }
        .btn-primary:hover { background-color: #15803d; }
        .btn-secondary { background-color: #475569; color: white; }
        .btn-secondary:hover { background-color: #334155; }
        .btn { padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 700; text-transform: uppercase; transition: all 0.2s ease; }

    </style>
</head>
<body class="dark text-white">
    <div class="flex h-screen">
        <!-- Sidebar container that will be populated by sidebar-loader.js -->
        <div id="sidebar-container"></div>
        
        <!-- Main game content area -->
        <main class="main-content p-4 md:p-8 flex items-center justify-center">
            
            <!-- This is the main hub for the game, preserved from your code -->
            <div id="course-hub" class="max-w-4xl mx-auto text-center">
                <header class="mb-12">
                    <div class="flex justify-center items-center gap-4 mb-4">
                        <svg class="h-20 w-20 text-green-400" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
                        </svg>
                        <h1 class="text-4xl md:text-5xl font-bold font-roboto-slab text-white">The Father's Armoury: The Children's Act</h1>
                    </div>
                    <p class="text-lg text-gray-300">A comprehensive guide to your rights, your child's best interests, and navigating the system.</p>
                </header>

                <section id="module-selection-section">
                    <h2 class="text-2xl font-bold text-center text-orange-400 mb-6">Choose a Module to Begin</h2>
                    <div id="module-selection" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="module-card bg-slate-800/80 p-6 rounded-xl cursor-pointer" data-module="1">
                            <h3 class="text-xl font-bold text-white mb-2">The Legal Landscape</h3>
                            <p class="text-gray-400 text-sm">How the Constitution and key institutions shape your parental journey.</p>
                        </div>
                        <div class="module-card bg-slate-800/80 p-6 rounded-xl cursor-pointer" data-module="2">
                            <h3 class="text-xl font-bold text-white mb-2">A Father's Rights & Duties</h3>
                            <p class="text-gray-400 text-sm">A detailed look at the sections of the Act that empower fathers.</p>
                        </div>
                        <div class="module-card bg-slate-800/80 p-6 rounded-xl cursor-pointer" data-module="3">
                            <h3 class="text-xl font-bold text-white mb-2">The System in Reality</h3>
                            <p class="text-gray-400 text-sm">Confronting discrimination and understanding the role of the High Court.</p>
                        </div>
                    </div>
                </section>
            </div>
            
            <!-- This is the content/quiz area, preserved from your code -->
            <div id="content-area" class="w-full max-w-4xl mx-auto hidden">
                <div id="module-content" class="prose max-w-none prose-invert mb-8 bg-slate-800/70 p-6 rounded-lg"></div>
                <button id="start-quiz-btn" class="btn btn-primary w-full">Test Your Knowledge</button>
                <section id="quiz-section" class="quiz-section mt-8 p-8 rounded-lg hidden"></section>
                <div id="end-screen" class="end-screen mt-8 p-8 rounded-lg hidden text-center"></div>
                <button id="back-to-hub-btn" class="btn btn-secondary mt-4">Back to Modules</button>
            </div>
        </main>
    </div>

    <!-- The original game logic script, preserved exactly -->
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const courseHub = document.getElementById('course-hub');
        const contentArea = document.getElementById('content-area');
        const moduleContentEl = document.getElementById('module-content');
        const quizSection = document.getElementById('quiz-section');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const backToHubBtn = document.getElementById('back-to-hub-btn');
        const endScreen = document.getElementById('end-screen');
        const moduleCards = document.querySelectorAll('.module-card');

        const courseContent = {
            1: {
                title: 'Module 1: The Legal Landscape for Parents',
                content: `
                    <h2>The Foundation: The Constitution</h2>
                    <p>Before diving into the Children's Act, we must start with the supreme law: the Constitution. Two principles are your shield and sword:</p>
                    <ul>
                        <li><strong>Section 9 (Equality):</strong> The law cannot discriminate against you based on your gender. As a father, you have equal standing to the mother.</li>
                        <li><strong>Section 28 (Best Interests of the Child):</strong> This is the ultimate test. In every matter concerning a child, their well-being is paramount. Every action by a court, social worker, or parent must pass this test.</li>
                    </ul>
                    <h3>How the System Fits Together</h3>
                    <p>The Children's Act was created to give effect to these constitutional rights. The institutions you will encounter are all bound by it:</p>
                    <ul>
                        <li><strong>Social Workers:</strong> Investigate a child's circumstances and make recommendations, always guided by the child's best interests.</li>
                        <li><strong>Magistrates' & Children's Courts:</strong> These are the first courts you may encounter. They handle maintenance, protection orders, and some parental rights issues. They MUST apply the Children's Act fairly.</li>
                        <li><strong>The Family Advocate:</strong> An impartial officer of the court whose only job is to investigate and report on what is in the child's best interests in disputes.</li>
                    </ul>
                `,
                questions: [
                    { q: "What is the supreme law that governs all other laws, including the Children's Act?", a: "The Constitution", o: ["The Maintenance Act", "The Rulings of the Family Advocate"] },
                    { q: "The principle that ensures a father is not treated differently from a mother is called:", a: "The Right to Equality (Section 9)", o: ["The Father's Preference Rule", "The Children's Court Mandate"] },
                    { q: "What is the single most important factor in any decision concerning a child?", a: "The child's best interests", o: ["Which parent earns more money", "What the parents want"] },
                    { q: "Which institution investigates and makes an impartial recommendation to the court about the child's welfare?", a: "The Office of the Family Advocate", o: ["The South African Police Service", "The Department of Home Affairs"] },
                    { q: "Are Children's Courts allowed to make rulings that contradict the Constitution?", a: "No, all court rulings must be consistent with the Constitution.", o: ["Yes, if they believe it is necessary.", "Only on weekdays."] },
                    { q: "The Children's Act was created to give effect to:", a: "The rights of children as enshrined in the Constitution.", o: ["The rights of parents only.", "The rules of social workers."] }
                ]
            },
            2: {
                title: "Module 2: A Father's Rights & Duties Under the Act",
                content: `
                    <p>The Act defines a father's involvement through 'Parental Responsibilities and Rights' (PR&R). It's crucial to know how you acquire these rights, especially as an unmarried father.</p>
                    <h3>The Components of PR&R (Section 18)</h3>
                    <p>PR&R is a bundle of four distinct rights and duties: (1) <strong>Care</strong>, (2) <strong>Contact</strong>, (3) <strong>Guardianship</strong>, and (4) <strong>Maintenance</strong>. A father can have some or all of these.</p>
                    <h3>The Married Father (Section 20)</h3>
                    <p>If you are married to the child's mother, you automatically acquire full and equal PR&R. It is that simple. You are a co-holder of all rights from the moment of marriage.</p>
                    <h3>The Unmarried Father (Section 21) - Your Most Important Tool</h3>
                    <p>This section is revolutionary. An unmarried biological father <strong>automatically</strong> acquires full PR&R if he meets specific, common-sense conditions. You DO NOT need a court to grant you these rights if you qualify. You have them. The conditions are:</p>
                    <ul>
                        <li>If you were living with the mother in a permanent life-partnership at the time of the child's birth.</li>
                        <li><strong>OR</strong>, if you (regardless of your relationship with the mother):</li>
                        <ol>
                            <li>Consent to be identified as the father; <strong>AND</strong></li>
                            <li>Contribute or attempt in good faith to contribute to the child's upbringing; <strong>AND</strong></li>
                            <li>Contribute or attempt in good faith to contribute to the child's maintenance.</li>
                        </ol>
                    </ul>
                `,
                questions: [
                    { q: "Which is NOT one of the four components of PR&R?", a: "Control", o: ["Care", "Contact"] },
                    { q: "Does a married father have the same rights as the mother?", a: "Yes, they are equal co-holders of PR&R.", o: ["No, the mother's rights are superior.", "Only if he earns more money."] },
                    { q: "For an unmarried father, living with the mother at birth automatically grants him full PR&R.", a: "True", o: ["False"] },
                    { q: "An unmarried father who supports his child financially and is involved in their life automatically acquires full PR&R.", a: "True", o: ["False"] },
                    { q: "The right to make major decisions about a child's life, like consenting to adoption, is called:", a: "Guardianship", o: ["Maintenance", "Contact"] },
                    { q: "The duty to provide for a child's daily needs like food and shelter is called:", a: "Care", o: ["Contact", "Guardianship"] },
                    { q: "Section 21 of the Children's Act is important primarily for:", a: "Unmarried fathers", o: ["Married fathers", "All mothers"] },
                    { q: "If an unmarried father has paid maintenance and tried to be part of the child's life, but is blocked by the mother, does he still acquire rights?", a: "Yes, because he attempted 'in good faith'.", o: ["No, because he was not successful.", "Only if he pays a large amount."] }
                ]
            },
            3: {
                title: 'Module 3: The System in Reality & The High Court',
                content: `
                    <h3>Controversial & Discriminatory Clauses</h3>
                    <p>Despite progress, the Act and the system still contain biases. Section 21, while empowering, places the burden of proof on the unmarried father to show he meets the criteria. There is no such burden on the mother. Furthermore, the concept of paying "damages" in customary law for a child born out of wedlock is sometimes misapplied in courts, creating a financial barrier to fatherhood that is not placed on mothers.</p>
                    <h3>Societal Issues and Their Impact</h3>
                    <p>South Africa's high rates of unemployment and father absence create a vicious cycle. The system often defaults to placing the child with the mother, who may be overburdened, while the paternal family (especially grandmothers) who are willing and able to care for the child are overlooked. This is not in the child's best interests, which demands that ALL available family support be considered.</p>
                    <h3>The High Court as Upper Guardian</h3>
                    <p>When a lower court (like the Children's or Magistrate's Court) makes an unfair or biased ruling, you are not defeated. The <strong>High Court</strong> is the "upper guardian" of all children. This means it has the power to review and overturn decisions made by lower courts. If a Magistrate ignores your Section 21 rights or shows bias, you have the constitutional right to take the matter on review or appeal to the High Court, which has a duty to correct that injustice based on the child's best interests.</p>
                `,
                questions: [
                    { q: "Does the Children's Act place an equal burden of proof on unmarried mothers and fathers to acquire rights?", a: "No, the burden is placed on the unmarried father.", o: ["Yes, the burden is equal.", "No, the burden is on the mother."] },
                    { q: "When the system defaults to placing a child with an overburdened mother while ignoring a supportive paternal family, this can be argued as:", a: "Not being in the child's best interests.", o: ["The correct legal procedure.", "A family problem, not a legal one."] },
                    { q: "What is the role of the High Court in relation to children?", a: "It is the upper guardian of all children.", o: ["It only handles criminal cases.", "It cannot overrule a Children's Court."] },
                    { q: "If you believe a Magistrate's Court decision was biased and ignored your rights, what can you do?", a: "Take the matter on review or appeal to the High Court.", o: ["You must accept the decision.", "Report the magistrate to the police."] },
                    { q: "The idea that an unmarried father might have to pay 'damages' to acquire rights is:", a: "A potentially discriminatory application of a customary concept.", o: ["A standard part of the Children's Act.", "A fee paid to the court."] },
                    { q: "A child's right to have a relationship with their paternal grandparents is:", a: "An important factor in determining the child's best interests.", o: ["Not relevant in court.", "Only considered if the father is absent."] },
                    { q: "The high rate of unemployment in South Africa primarily impacts:", a: "Both parents' ability to care for a child.", o: ["Only the mother's ability.", "Only the father's ability."] },
                    { q: "The concept of 'best interests' requires courts to consider:", a: "All relevant factors, including the child's relationship with the extended family.", o: ["Only the financial status of the parents.", "Only the mother's wishes."] },
                    { q: "True or False: A father's rights are less important than a mother's rights under the Constitution.", a: "False", o: ["True"] },
                    { q: "Appealing to the High Court is a process to:", a: "Correct a legal error or injustice from a lower court.", o: ["Punish the other parent.", "Start the case over from scratch."] }
                ]
            }
        };
        
        let currentModuleData = {}; let currentQuestionIndex = 0; let score = 0;

        function displayModule(moduleNum) {
            currentModuleData = courseContent[moduleNum];
            courseHub.classList.add('hidden');
            contentArea.classList.remove('hidden');
            quizSection.classList.add('hidden');
            endScreen.classList.add('hidden');
            startQuizBtn.classList.remove('hidden');
            moduleContentEl.innerHTML = `<h2>${currentModuleData.title}</h2>${currentModuleData.content}`;
        }
        
        function setupQuiz() {
            startQuizBtn.classList.add('hidden');
            quizSection.classList.remove('hidden');
            currentQuestionIndex = 0;
            score = 0;
            loadQuestion();
        }

        function loadQuestion() {
            const questionData = currentModuleData.questions[currentQuestionIndex];
            let optionsHTML = shuffleArray([...questionData.o, questionData.a]).map(opt => `<div class="quiz-option p-3 rounded-lg border border-gray-600 hover:bg-slate-700 cursor-pointer" data-answer="${opt === questionData.a}">${opt}</div>`).join('');
            quizSection.innerHTML = `<p class="font-semibold text-lg mb-4">${currentQuestionIndex + 1}. ${questionData.q}</p><div class="space-y-3">${optionsHTML}</div><div class="feedback mt-4 text-sm p-3 rounded-lg"></div>`;
        }

        function handleAnswerClick(e) {
            if (!e.target.classList.contains('quiz-option')) return;
            const selectedOption = e.target;
            const isCorrect = selectedOption.dataset.answer === 'true';
            const feedbackDiv = quizSection.querySelector('.feedback');
            
            quizSection.querySelectorAll('.quiz-option').forEach(opt => opt.style.pointerEvents = 'none');

            if (isCorrect) {
                selectedOption.classList.add('bg-green-500/50', 'border-green-500');
                feedbackDiv.innerHTML = '<p class="text-green-400 font-bold">Correct! This knowledge is your shield.</p>';
                score++;
            } else {
                selectedOption.classList.add('bg-red-500/50', 'border-red-500');
                feedbackDiv.innerHTML = '<p class="text-red-400 font-bold">Not quite. Understanding the Act is key to protecting your rights.</p>';
            }

            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < currentModuleData.questions.length) {
                    loadQuestion();
                } else {
                    showEndScreen();
                }
            }, 2500);
        }

        function showEndScreen() {
            quizSection.classList.add('hidden');
            endScreen.classList.remove('hidden');
            endScreen.innerHTML = `<h2 class="text-2xl font-bold font-roboto-slab text-green-400">Module Complete!</h2><p class="text-lg mt-2">You scored ${score} out of ${currentModuleData.questions.length}.</p><p class="mt-4">You have a strong understanding of the Children's Act.</p>`;
        }
        
        function goBackToHub() {
            contentArea.classList.add('hidden');
            courseHub.classList.remove('hidden');
            moduleCards.forEach(c => c.classList.remove('selected'));
        }

        function shuffleArray(array) { return [...array].sort(() => Math.random() - 0.5); }

        moduleCards.forEach(card => card.addEventListener('click', () => {
            selectCard(card, 'module');
            displayModule(parseInt(card.dataset.module));
        }));
        startQuizBtn.addEventListener('click', setupQuiz);
        quizSection.addEventListener('click', handleAnswerClick);
        backToHubBtn.addEventListener('click', goBackToHub);
        
        function selectCard(card, cardType) {
            document.querySelectorAll(`.${cardType}-card`).forEach(c => c.classList.remove('selected'));
            card.classList.add('selected');
        }
    });
    </script>
    
    <!-- Scripts to load the sidebar and dynamic background -->
    <script src="../assets/js/sidebar-loader.js"></script>
    <script type="module" src="../assets/js/main.js"></script>
</body>
</html>
