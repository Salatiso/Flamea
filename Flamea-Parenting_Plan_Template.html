<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flamea - Comprehensive Parenting Plan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Roboto+Slab:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7fafc;
            counter-reset: page;
        }
        /* The SVG for the watermark, URL-encoded */
        :root {
            --watermark-svg: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400'%3E%3Cg transform='rotate(-30 200 200)'%3E%3Ctext x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='Inter, sans-serif' font-size='60' font-weight='bold' fill='%23000000' opacity='0.05'%3EFlame%3Ctspan fill='%234ade80'%3Ea%3C/tspan%3E%3C/text%3E%3C/g%3E%3C/svg%3E");
        }
        .page {
            background: white;
            width: 210mm;
            height: 297mm;
            margin: 20px auto;
            padding: 20mm;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            position: relative;
            display: flex;
            flex-direction: column;
            page-break-after: always; /* Ensure each .page is a new page */
            counter-increment: page;
        }
        .page::after { /* The watermark */
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: var(--watermark-svg);
            background-repeat: no-repeat;
            background-position: center;
            z-index: 0;
        }
        .page > * {
            z-index: 1; /* Ensure content is above watermark */
        }
        .cover-page, .back-cover-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .cover-page::after, .back-cover-page::after {
            display: none; /* No watermark on cover pages */
        }
        .content-body { flex-grow: 1; }
        .editable-input {
            background-color: #f0f9ff;
            border: none;
            border-bottom: 1px solid #90caf9;
            width: 100%;
            padding: 4px 2px;
            font-style: italic;
        }
        .editable-input:focus { outline: none; background-color: #e3f2fd; }
        .checkbox-label { display: flex; align-items: center; margin-bottom: 8px; }
        .checkbox { width: 20px; height: 20px; margin-right: 10px; border: 1px solid #90caf9; }
        .annexure-quote { border-left: 3px solid #cbd5e0; padding-left: 1rem; margin-bottom: 1rem; font-style: italic; color: #4a5568;}

        /* --- Print-Specific Styles --- */
        @media print {
            body { background-color: white; }
            .page { margin: 0; box-shadow: none; height: auto; min-height: 290mm; }
            .editable-input { background-color: #e3f2fd !important; -webkit-print-color-adjust: exact; color-adjust: exact; }
            .hide-on-print { display: none; }

            /* Header and Footer Setup */
            @page {
                @top-center {
                    content: "Comprehensive Parenting Plan";
                    font-size: 9pt;
                    color: #4a5568;
                    font-family: 'Inter', sans-serif;
                }
                @bottom-left {
                    content: "© " (string(docYear)) " Flamea.org";
                    font-size: 9pt;
                    color: #718096;
                    font-family: 'Inter', sans-serif;
                }
                @bottom-right {
                    content: "Page " counter(page);
                    font-size: 9pt;
                    color: #718096;
                    font-family: 'Inter', sans-serif;
                }
            }
            @page :first { /* Hide header/footer on cover */
                @top-center { content: "" }
                @bottom-left { content: "" }
                @bottom-right { content: "" }
            }
        }
    </style>
</head>
<body>

    <!-- Cover Page -->
    <div class="page cover-page">
        <!-- Content for cover page -->
        <div class="my-auto">
            <h1 class="font-bold text-4xl md:text-5xl text-gray-800">Flame<span class="text-green-500">a</span></h1>
            <p class="text-lg text-gray-600 mt-2">Empowering Fathers, Strengthening Families.</p>
            <div class="w-24 h-px bg-gray-300 my-12 mx-auto"></div>
            <h2 class="text-3xl md:text-4xl font-bold text-gray-800 font-roboto-slab">Comprehensive Parenting Plan</h2>
            <p class="text-md text-gray-500 mt-4">A legally-informed agreement crafted in the best interests of the child.</p>
        </div>
        <div class="mt-auto text-xs text-gray-400">
            <p>Document ID: <span id="doc-id-cover"></span></p>
            <p>Version: 1.0 (Generated on <span id="generation-date"></span>)</p>
        </div>
    </div>
    
    <!-- All other pages follow, using the .page class -->

    <div class="page">
        <h3 class="text-xl font-bold font-roboto-slab mb-6 border-b pb-2">SECTION 1: PARTICULARS</h3>
        <!-- Section 1 content from previous immersive -->
         <div class="grid grid-cols-2 gap-8">
            <div>
                <h4 class="font-bold mb-2">1.1. The Father (or Parent A)</h4>
                <label class="block text-xs text-gray-500">Full Legal Name</label><input type="text" class="editable-input mb-2">
                <label class="block text-xs text-gray-500">Nickname (Optional)</label><input type="text" class="editable-input mb-2">
                <label class="block text-xs text-gray-500">ID Number</label><input type="text" class="editable-input mb-2">
                <label class="block text-xs text-gray-500">Residential Address</label><textarea class="editable-input mb-2 h-20"></textarea>
                <label class="block text-xs text-gray-500">Contact Number</label><input type="text" class="editable-input mb-2">
                <label class="block text-xs text-gray-500">Email Address</label><input type="email" class="editable-input mb-2">
            </div>
             <div>
                <h4 class="font-bold mb-2">1.2. The Mother (or Parent B)</h4>
                <label class="block text-xs text-gray-500">Full Legal Name</label><input type="text" class="editable-input mb-2">
                <label class="block text-xs text-gray-500">Nickname (Optional)</label><input type="text" class="editable-input mb-2">
                <label class="block text-xs text-gray-500">ID Number</label><input type="text" class="editable-input mb-2">
                <label class="block text-xs text-gray-500">Residential Address</label><textarea class="editable-input mb-2 h-20"></textarea>
                <label class="block text-xs text-gray-500">Contact Number</label><input type="text" class="editable-input mb-2">
                <label class="block text-xs text-gray-500">Email Address</label><input type="email" class="editable-input mb-2">
            </div>
        </div>
        <h4 class="font-bold mt-6 mb-2">1.3. The Child / Children</h4>
        <div class="p-4 border rounded-lg">
            <label class="block text-xs text-gray-500">Full Legal Name</label><input type="text" class="editable-input mb-2">
            <label class="block text-xs text-gray-500">Date of Birth</label><input type="date" class="editable-input mb-2">
            <p class="text-xs text-gray-500 mt-2">Relationship:</p><label class="checkbox-label"><input type="checkbox" class="checkbox"> Biological</label><label class="checkbox-label"><input type="checkbox" class="checkbox"> Adopted</label>
        </div>
    </div>

    <div class="page">
        <h3 class="text-xl font-bold font-roboto-slab mb-6 border-b pb-2">SECTION 2: RESIDENCE & CONTACT</h3>
         <!-- Placeholder for Section 2 content -->
        <p class="text-gray-500 italic">This section will contain fields for Primary Residence, Custody Source, and detailed Contact Schedules (School Term, Holidays, Special Days).</p>
    </div>

    <div class="page">
        <h3 class="text-xl font-bold font-roboto-slab mb-6 border-b pb-2">SECTION 3: FINANCIAL CONTRIBUTIONS</h3>
        <!-- Placeholder for Section 3 content -->
        <p class="text-gray-500 italic">This section will feature the dynamic Contribution Table with color-coded balancing, along with fields to specify the source of the financial agreement (Mutual, Court Order, etc.).</p>
    </div>

     <div class="page">
        <h3 class="text-xl font-bold font-roboto-slab mb-6 border-b pb-2">SECTION 4 & 5: DECISION-MAKING & COMMUNICATION</h3>
         <!-- Placeholder for Section 4 & 5 content -->
        <p class="text-gray-500 italic">This section will have inputs for how decisions on Education, Healthcare, and Cultural Upbringing are made, plus the agreed-upon protocols for communication and dispute resolution.</p>
    </div>

    <div class="page">
        <h3 class="text-xl font-bold font-roboto-slab mb-6 border-b pb-2">SECTION 6: DECLARATION & SIGNATURES</h3>
        <!-- Section 6 content from previous immersive -->
        <p class="mb-4 text-sm text-gray-600">By signing below, the parties acknowledge that they understand and agree to the terms herein, affirming this plan is in the best interests of the child/ren.</p>
        <p class="mb-4 text-sm">Signed at <input type="text" class="editable-input" style="width: 200px;"> on this <input type="text" class="editable-input" style="width: 50px;"> day of <input type="text" class="editable-input" style="width: 150px;"> 20<input type="text" class="editable-input" style="width: 50px;">.</p>
        <div class="grid grid-cols-2 gap-12 mt-16">
            <div><div class="border-t-2 border-gray-800 pt-2"><p class="font-bold">The Father (or Parent A)</p></div></div>
            <div><div class="border-t-2 border-gray-800 pt-2"><p class="font-bold">The Mother (or Parent B)</p></div></div>
        </div>
         <h4 class="font-bold mt-16 mb-4">Witnesses</h4>
         <div id="witness-section">
            <div class="grid grid-cols-3 gap-4 border-t pt-4 mb-4 items-end">
                 <div class="col-span-2 border-t-2 border-gray-800 pt-2">
                    <label class="block text-xs text-gray-500">Witness Full Name</label>
                    <input type="text" class="editable-input">
                 </div>
                 <div>
                    <label class="block text-xs text-gray-500">On behalf of:</label>
                    <select class="editable-input"><option>The Father</option><option>The Mother</option><option>Both Parties</option></select>
                 </div>
            </div>
         </div>
         <button id="add-witness" class="text-sm text-green-600 hover:text-green-800 mt-2 hide-on-print">+ Add another witness</button>
    </div>

    <div class="page">
        <h3 class="text-xl font-bold font-roboto-slab mb-6 border-b pb-2">ANNEXURE A: DEFINITIONS & KEY LEGAL PRINCIPLES</h3>
        <div class="space-y-6 text-sm">
            <div>
                <h4 class="font-bold">Best Interests of the Child</h4>
                <p class="text-gray-600">The core principle of South African family law. It means that in any matter concerning a child, their welfare, safety, and well-being are the most important consideration, above the interests of the parents or any other party.</p>
            </div>
             <div>
                <h4 class="font-bold">Parental Responsibilities and Rights</h4>
                <p class="text-gray-600">A bundle of legal duties and powers held by parents, including the duty to care for the child, maintain contact, act as their guardian, and contribute to their maintenance.</p>
            </div>
            <div>
                <h4 class="font-bold">Constitution of the Republic of South Africa, 1996</h4>
                <p class="annexure-quote"><b>Section 9: Equality.</b> (1) Everyone is equal before the law and has the right to equal protection and benefit of the law. (3) The state may not unfairly discriminate... on grounds including... sex, gender, marital status, ...birth.</p>
                <p class="annexure-quote"><b>Section 28: Children.</b> (2) A child’s best interests are of paramount importance in every matter concerning the child.</p>
            </div>
            <div>
                <h4 class="font-bold">The Children's Act 38 of 2005</h4>
                <p class="annexure-quote"><b>Section 20: Acquisition of parental responsibilities and rights by father.</b> An unmarried father acquires full parental responsibilities and rights if he consents to be identified as the father, contributes to the child's upbringing and maintenance in good faith.</p>
                 <p class="annexure-quote"><b>Section 33: Parenting plans.</b> Co-holders of parental responsibilities and rights may agree on a parenting plan to regulate the exercise of their respective responsibilities and rights.</p>
            </div>
        </div>
    </div>

    <!-- Back Cover Page -->
    <div class="page back-cover-page">
        <!-- Content for back cover page -->
         <div class="m-auto text-center">
            <h2 class="font-bold text-3xl text-gray-800">About Flame<span class="text-green-500">a</span></h2>
            <p class="max-w-xl mx-auto text-gray-600 mt-4">FLAMEA is a South African advocacy platform dedicated to empowering fathers with the knowledge, tools, and community support needed to be active, engaged, and legally protected parents.</p>
            <div class="w-24 h-px bg-gray-300 my-10 mx-auto"></div>
             <p class="mt-12 text-lg font-bold">www.flamea.org</p>
        </div>
    </div>

    <script>
        const docId = `FLAMEA-PP-${Date.now()}`;
        const currentYear = new Date().getFullYear();
        document.getElementById('doc-id-cover').textContent = docId;
        document.getElementById('generation-date').textContent = new Date().toLocaleDateString('en-ZA');
        document.head.insertAdjacentHTML("beforeend", `<style>
            @string { docYear "${currentYear}"; }
        </style>`);

        const witnessSection = document.getElementById('witness-section');
        const addWitnessButton = document.getElementById('add-witness');
        const witnessHTML = witnessSection.innerHTML;

        addWitnessButton.addEventListener('click', () => {
            const newWitnessBlock = document.createElement('div');
            // Reset the innerHTML to the original template to avoid duplicating the entire section
            newWitnessBlock.innerHTML = `<div class="grid grid-cols-3 gap-4 border-t pt-4 mb-4 items-end">
                 <div class="col-span-2 border-t-2 border-gray-800 pt-2">
                    <label class="block text-xs text-gray-500">Witness Full Name</label>
                    <input type="text" class="editable-input">
                 </div>
                 <div>
                    <label class="block text-xs text-gray-500">On behalf of:</label>
                    <select class="editable-input"><option>The Father</option><option>The Mother</option><option>Both Parties</option></select>
                 </div>
            </div>`;
            witnessSection.appendChild(newWitnessBlock);
        });
    </script>
</body>
</html>
