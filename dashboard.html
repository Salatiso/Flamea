<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FLAMEA - Your Life CV Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700;900&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body { font-family: 'Open Sans', sans-serif; }
        .main-container { display: grid; grid-template-columns: 280px 1fr; height: 100vh; width: 100vw; overflow: hidden; }
        .main-content { overflow-y: auto; scroll-behavior: smooth;}
        .sidebar-direct-link { transition: all 0.3s ease; transform: translateX(0); }
        .sidebar-direct-link:hover, .sidebar-direct-link.active { background-color: #2563EB; color: white; transform: translateX(10px); }
        .tab-button { transition: all 0.2s; border-bottom: 3px solid transparent; }
        .tab-button.active { border-color: #34D399; color: #6EE7B7; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .modal { display: none; }
        .modal.active { display: flex; }
    </style>
</head>
<body class="bg-gray-800 text-white">
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="bg-gray-900 p-6 flex flex-col">
             <a href="index.html" class="text-3xl font-black font-roboto mb-12 text-center">FLAME<span class="text-green-400">A</span></a>
            <nav id="main-nav" class="flex flex-col space-y-4">
                 <a href="index.html" class="sidebar-direct-link flex items-center p-4 rounded-lg"><i class="fas fa-home w-6 text-center mr-4"></i> Home</a>
                 <a href="training.html" class="sidebar-direct-link active flex items-center p-4 rounded-lg"><i class="fas fa-chalkboard-teacher w-6 text-center mr-4"></i> Training Hub</a>
                 <a href="community.html" class="sidebar-direct-link flex items-center p-4 rounded-lg"><i class="fas fa-users w-6 text-center mr-4"></i> Community</a>
            </nav>
            <div class="mt-auto text-center">
                <div id="auth-links-desktop" class="mb-4"></div>
                <p class="text-xs text-gray-500">&copy; <span id="currentYear"></span> Flamea.org</p>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content p-8 md:p-12">
            <div id="loading-state" class="text-center mt-20"><p class="text-lg">Loading Dashboard...</p></div>
            
            <div id="dashboard-container" class="max-w-7xl mx-auto hidden">
                <!-- Header -->
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h2 id="dashboard-welcome" class="text-4xl font-bold font-roboto text-white">My Dashboard</h2>
                        <p class="text-lg text-gray-400">Your dynamic Life CV. Manage your achievements and professional profile.</p>
                    </div>
                    <div class="flex gap-2">
                        <button id="edit-profile-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center"><i class="fas fa-edit mr-2"></i> Edit Profile</button>
                        <button id="export-profile-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg flex items-center"><i class="fas fa-download mr-2"></i> Export / Share</button>
                    </div>
                </div>

                <!-- Tabs Navigation -->
                <div class="border-b border-gray-700 mb-8">
                    <nav class="flex space-x-8" aria-label="Tabs">
                        <button class="tab-button active" data-tab="life-cv">Life CV</button>
                        <button class="tab-button" data-tab="achievements">FLAMEA Achievements</button>
                    </nav>
                </div>

                <!-- Tab Content -->
                <div>
                    <!-- Life CV Tab -->
                    <div id="life-cv" class="tab-content active space-y-8">
                        <div class="bg-gray-900 p-6 rounded-lg">
                            <h3 class="text-xl font-bold text-green-400 mb-4">Professional Summary</h3>
                            <p id="profile-summary" class="text-gray-300">Your professional summary will appear here. Click 'Edit Profile' to add one.</p>
                        </div>
                        <div class="bg-gray-900 p-6 rounded-lg">
                             <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold text-green-400">Work Experience</h3>
                                <button id="upload-cv-btn" class="text-sm bg-blue-500 hover:bg-blue-600 py-1 px-3 rounded-md">Upload CV</button>
                            </div>
                            <div id="work-experience-section" class="space-y-4 text-gray-300">Your work experience will appear here.</div>
                        </div>
                         <div class="bg-gray-900 p-6 rounded-lg">
                            <h3 class="text-xl font-bold text-green-400 mb-4">External Links & Profiles</h3>
                            <div id="external-links-section" class="space-y-2 text-blue-400">Your external links will appear here.</div>
                        </div>
                    </div>

                    <!-- Achievements Tab -->
                    <div id="achievements" class="tab-content">
                        <div class="bg-gray-900 p-6 rounded-lg">
                             <h3 class="text-xl font-bold text-green-400 mb-4">Badges Earned</h3>
                             <div id="badges-section" class="flex gap-4">
                                 <!-- Badges will be injected here -->
                                <p class="text-gray-400">No badges earned yet.</p>
                             </div>
                        </div>
                        <div class="bg-gray-900 p-6 rounded-lg mt-8">
                             <h3 class="text-xl font-bold text-green-400 mb-4">Course Certificates</h3>
                            <div id="certificates-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <!-- Certificates will be injected here -->
                                 <p class="text-gray-400 col-span-full">No certificates earned yet.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="dashboard-login-prompt" class="text-center mt-20 hidden">
                 <i class="fas fa-lock text-6xl text-blue-500 mx-auto"></i>
                 <h2 class="text-3xl font-bold text-white mt-4">This is Your Personal Dashboard</h2>
                 <p class="mt-2 text-lg text-gray-400">Please <a href="login.html" class="font-bold text-blue-400 hover:underline">log in or register</a> to view your saved documents.</p>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- Edit Profile Modal -->
    <div id="edit-profile-modal" class="modal fixed inset-0 bg-black bg-opacity-75 items-center justify-center z-50">
        <div class="bg-gray-800 p-8 rounded-lg shadow-2xl w-full max-w-2xl">
            <h3 class="text-2xl font-bold mb-6">Edit Your Life CV</h3>
            <form id="profile-form" class="space-y-4">
                <div>
                    <label for="profile-name" class="block mb-1 font-semibold">Full Name</label>
                    <input type="text" id="profile-name" class="w-full p-2 bg-gray-700 rounded border border-gray-600 focus:outline-none focus:border-blue-500">
                </div>
                <div>
                    <label for="profile-summary-input" class="block mb-1 font-semibold">Professional Summary</label>
                    <textarea id="profile-summary-input" rows="4" class="w-full p-2 bg-gray-700 rounded border border-gray-600 focus:outline-none focus:border-blue-500"></textarea>
                </div>
                <div>
                    <label for="profile-linkedin" class="block mb-1 font-semibold">LinkedIn Profile URL</label>
                    <input type="url" id="profile-linkedin" class="w-full p-2 bg-gray-700 rounded border border-gray-600 focus:outline-none focus:border-blue-500">
                </div>
                 <div>
                    <label for="profile-coursera" class="block mb-1 font-semibold">Coursera Profile URL</label>
                    <input type="url" id="profile-coursera" class="w-full p-2 bg-gray-700 rounded border border-gray-600 focus:outline-none focus:border-blue-500">
                </div>
                <div class="flex justify-end gap-4 pt-4">
                    <button type="button" id="cancel-edit-btn" class="bg-gray-600 hover:bg-gray-700 py-2 px-4 rounded">Cancel</button>
                    <button type="submit" class="bg-green-600 hover:bg-green-700 py-2 px-6 rounded">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Upload CV Modal -->
    <div id="upload-cv-modal" class="modal fixed inset-0 bg-black bg-opacity-75 items-center justify-center z-50">
        <div class="bg-gray-800 p-8 rounded-lg shadow-2xl w-full max-w-lg">
             <h3 class="text-2xl font-bold mb-6">Upload Professional CV</h3>
             <p class="text-sm text-gray-400 mb-4">Upload a CSV file exported from LinkedIn, PNet, CareerJunction, etc. This will overwrite your current work experience.</p>
              <form id="cv-upload-form">
                <input type="file" id="cv-file-input" accept=".csv" class="w-full p-2 bg-gray-700 rounded border border-gray-600">
                <div class="flex justify-end gap-4 pt-6">
                    <button type="button" id="cancel-upload-btn" class="bg-gray-600 hover:bg-gray-700 py-2 px-4 rounded">Cancel</button>
                    <button type="submit" class="bg-blue-600 hover:bg-blue-700 py-2 px-6 rounded">Upload & Parse</button>
                </div>
              </form>
               <div id="upload-status" class="mt-4 text-center"></div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="export-modal" class="modal fixed inset-0 bg-black bg-opacity-75 items-center justify-center z-50">
       <div class="bg-gray-800 p-8 rounded-lg shadow-2xl w-full max-w-lg">
             <h3 class="text-2xl font-bold mb-6">Export / Share Your Life CV</h3>
             <p class="text-sm text-gray-400 mb-4">Select the sections you wish to include in your document.</p>
             <div id="export-options" class="space-y-2">
                 <label class="flex items-center"><input type="checkbox" data-section="summary" class="mr-2" checked> Professional Summary</label>
                 <label class="flex items-center"><input type="checkbox" data-section="experience" class="mr-2" checked> Work Experience</label>
                 <label class="flex items-center"><input type="checkbox" data-section="links" class="mr-2" checked> External Links</label>
                 <label class="flex items-center"><input type="checkbox" data-section="achievements" class="mr-2"> FLAMEA Achievements & Badges</label>
             </div>
             <div class="mt-6">
                <label for="export-email" class="block mb-1 font-semibold">Email to (optional)</label>
                <input type="email" id="export-email" placeholder="recipient@example.com" class="w-full p-2 bg-gray-700 rounded border border-gray-600">
                <p class="text-xs text-yellow-400 mt-2"><i class="fas fa-exclamation-triangle mr-1"></i> Remember: Emailing shares your personal data. Ensure the recipient is legitimate.</p>
             </div>
             <div class="flex justify-end gap-4 pt-6">
                <button type="button" id="cancel-export-btn" class="bg-gray-600 hover:bg-gray-700 py-2 px-4 rounded">Cancel</button>
                <button id="generate-export-btn" class="bg-green-600 hover:bg-green-700 py-2 px-6 rounded">Generate & Download/Send</button>
             </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>document.getElementById('currentYear').textContent = new Date().getFullYear();</script>
    <script type="module" src="assets/js/auth.js"></script>
    <script type="module" src="assets/js/dashboard.js"></script>
</body>
</html>
