<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flamea - Forms & Documents Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Roboto+Slab:wght@700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Roboto', sans-serif; -webkit-print-color-adjust: exact; background-color: #f3f4f6; }
        .timeline { position: fixed; top: 0; right: 0; height: 100vh; width: 80px; background-color: #1a202c; color: white; display: flex; flex-direction: column; align-items: center; padding-top: 20px; }
        .timeline-item { margin-bottom: 20px; text-align: center; cursor: pointer; }
        .timeline-item i { font-size: 24px; margin-bottom: 5px; }
        .timeline-item span { font-size: 12px; }
        .timeline-panel { position: fixed; top: 0; right: 80px; height: 100vh; width: 300px; background-color: #fff; box-shadow: -2px 0 5px rgba(0,0,0,0.1); transform: translateX(100%); transition: transform 0.3s ease; padding: 20px; overflow-y: auto; }
        .timeline-panel.active { transform: translateX(0); }
        .achievement { background-color: #16a34a; color: white; padding: 5px 10px; border-radius: 5px; font-size: 12px; margin-top: 10px; }
        .progress-bar { width: 100%; background-color: #e5e7eb; height: 10px; border-radius: 5px; margin-top: 10px; }
        .progress-fill { height: 100%; background-color: #16a34a; border-radius: 5px; transition: width 0.5s ease; }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js"></script>
</head>
<body class="bg-gray-100 text-gray-900">
    <header class="bg-white shadow-md">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold text-green-600">Flamea</div>
            <nav>
                <a href="index.html" class="text-gray-600 hover:text-green-600 mx-2">Home</a>
                <a href="about.html" class="text-gray-600 hover:text-green-600 mx-2">About</a>
                <a href="tools.html" class="text-gray-600 hover:text-green-600 mx-2">Tools</a>
                <a href="training.html" class="text-gray-600 hover:text-green-600 mx-2">Training</a>
                <a href="resources.html" class="text-gray-600 hover:text-green-600 mx-2">Resources</a>
                <a href="community.html" class="text-gray-600 hover:text-green-600 mx-2">Community</a>
                <a href="login.html" class="text-gray-600 hover:text-green-600 mx-2">Login / Register</a>
            </nav>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-8 text-center">Forms & Documents Hub</h1>
        <p class="text-center mb-8">Prepare for your journey as a father with the right tools. Even if things go wrong, honest communication and Flamea’s resources can help you salvage everything for your child’s sake.</p>

        <div class="grid md:grid-cols-2 gap-8">
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-xl font-bold mb-4">Simple Start Wizard</h2>
                <p class="mb-4">Not sure where to begin? We’ll guide you to the right form.</p>
                <button id="start-wizard" class="bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700">Start Wizard</button>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-xl font-bold mb-4">Manual Explorer</h2>
                <p class="mb-4">Know what you need? Browse all forms by category.</p>
                <button id="explore-forms" class="bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700">Explore Forms</button>
            </div>
        </div>

        <div id="wizard-section" class="mt-8 hidden">
            <h2 class="text-2xl font-bold mb-4">Simple Start Wizard</h2>
            <div id="wizard-step-1" class="mb-4">
                <label class="block mb-2">What is your general situation?</label>
                <select id="situation" class="w-full p-2 border rounded">
                    <option value="">-- Select a situation --</option>
                    <option value="child">It’s about my child/paternity</option>
                    <option value="marriage">It’s about marriage/divorce</option>
                    <option value="court">I need to go to court</option>
                    <option value="criminal">It’s a criminal matter</option>
                    <option value="discrimination">I’m facing discrimination</option>
                </select>
            </div>
            <div id="wizard-step-2" class="mb-4 hidden">
                <label class="block mb-2">What do you need to do?</label>
                <select id="action" class="w-full p-2 border rounded">
                    <option value="">-- Select an action --</option>
                </select>
            </div>
            <div id="wizard-result" class="hidden">
                <h3 class="text-xl font-bold mb-2">Recommended Form(s):</h3>
                <ul id="recommended-forms" class="list-disc pl-5"></ul>
            </div>
        </div>

        <div id="explorer-section" class="mt-8 hidden">
            <h2 class="text-2xl font-bold mb-4">Form Categories</h2>
            <div class="grid md:grid-cols-3 gap-4">
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="font-bold mb-2">Family Law</h3>
                    <ul>
                        <li><a href="https://www.justice.gov.za/forms/form_cj.html" target="_blank">Form 10 [J779]: Register Parenting Plan</a></li>
                        <li><a href="templates/Parenting_Plan_Template.html">Parenting Plan Template</a></li>
                        <li><a href="templates/Child_Support_Agreement.html">Child Support Agreement</a></li>
                    </ul>
                </div>
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="font-bold mb-2">Affidavits</h3>
                    <ul>
                        <li><a href="templates/Affidavit_General_Template.html">General Affidavit Template</a></li>
                        <li><a href="templates/Affidavit-SAPS_Complaint_.html">SAPS Complaint Affidavit</a></li>
                    </ul>
                </div>
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="font-bold mb-2">Letters</h3>
                    <ul>
                        <li><a href="templates/Affirmation_Parental_Rights_and_Responsibilities_Iinformal.html">Informal Parental Rights Letter</a></li>
                        <li><a href="templates/Damages_Accepting_Letter.html">Damages Accepting Letter</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="form-actions" class="mt-8 flex justify-center space-x-4">
            <button id="save-progress" class="bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700">Save Progress</button>
            <button id="send-form" class="bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700">Send</button>
            <button id="print-form" class="bg-gray-600 text-white py-2 px-4 rounded hover:bg-gray-700">Print</button>
            <button id="share-form" class="bg-yellow-600 text-white py-2 px-4 rounded hover:bg-yellow-700">Share</button>
        </div>

        <div id="superdad-progress" class="mt-8 bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-xl font-bold mb-4">Your SuperDad Journey</h2>
            <p id="progress-message" class="mb-4">Start your journey to become a SuperDad!</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 0%;"></div>
            </div>
        </div>
    </main>

    <!-- Interactive Timeline -->
    <div class="timeline">
        <div class="timeline-item" data-stage="preparation">
            <i class="fas fa-book"></i>
            <span>Preparation</span>
        </div>
        <div class="timeline-item" data-stage="family">
            <i class="fas fa-users"></i>
            <span>Family</span>
        </div>
        <div class="timeline-item" data-stage="action">
            <i class="fas fa-tools"></i>
            <span>Action</span>
        </div>
        <div class="timeline-item" data-stage="resolution">
            <i class="fas fa-check-circle"></i>
            <span>Resolution</span>
        </div>
    </div>

    <div class="timeline-panel" id="timeline-panel">
        <h2 class="text-xl font-bold mb-4" id="stage-title"></h2>
        <div id="stage-content"></div>
        <button id="close-panel" class="mt-4 bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700">Close</button>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Wizard Logic
        const situationSelect = document.getElementById('situation');
        const actionSelect = document.getElementById('action');
        const recommendedForms = document.getElementById('recommended-forms');
        const formsData = {
            child: {
                actions: ["Register a parenting plan", "File for paternity", "Request child support"],
                forms: ["Form 10 [J779]", "templates/Parenting_Plan_Template.html", "templates/Child_Support_Agreement.html"]
            },
            marriage: {
                actions: ["File for divorce", "Request spousal support"],
                forms: ["Divorce Form", "Spousal Support Form"]
            },
            court: {
                actions: ["File a complaint", "Request a hearing"],
                forms: ["Complaint Form", "Hearing Request Form"]
            },
            criminal: {
                actions: ["Report a crime", "File for protection"],
                forms: ["Crime Report Form", "Protection Order Form"]
            },
            discrimination: {
                actions: ["File a discrimination complaint"],
                forms: ["Discrimination Complaint Form"]
            }
        };

        situationSelect.addEventListener('change', (e) => {
            const situation = e.target.value;
            if (situation) {
                document.getElementById('wizard-step-2').classList.remove('hidden');
                actionSelect.innerHTML = '<option value="">-- Select an action --</option>';
                formsData[situation].actions.forEach((action, index) => {
                    actionSelect.innerHTML += `<option value="${index}">${action}</option>`;
                });
            } else {
                document.getElementById('wizard-step-2').classList.add('hidden');
                document.getElementById('wizard-result').classList.add('hidden');
            }
        });

        actionSelect.addEventListener('change', (e) => {
            const situation = situationSelect.value;
            const actionIndex = e.target.value;
            if (actionIndex !== "") {
                document.getElementById('wizard-result').classList.remove('hidden');
                recommendedForms.innerHTML = `<li><a href="${formsData[situation].forms[actionIndex]}">${formsData[situation].actions[actionIndex]}</a></li>`;
            } else {
                document.getElementById('wizard-result').classList.add('hidden');
            }
        });

        // Show/Hide Sections
        document.getElementById('start-wizard').addEventListener('click', () => {
            document.getElementById('wizard-section').classList.remove('hidden');
            document.getElementById('explorer-section').classList.add('hidden');
        });
        document.getElementById('explore-forms').addEventListener('click', () => {
            document.getElementById('explorer-section').classList.remove('hidden');
            document.getElementById('wizard-section').classList.add('hidden');
        });

        // Save Progress
        document.getElementById('save-progress').addEventListener('click', () => {
            auth.onAuthStateChanged((user) => {
                if (user) {
                    const progress = { stage: currentStage, achievements: currentAchievements };
                    db.collection('users').doc(user.uid).set({
                        superdadProgress: progress,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    }, { merge: true });
                    alert('Progress saved successfully!');
                } else {
                    alert('Please log in to save your SuperDad progress!');
                    window.location.href = 'login.html';
                }
            });
        });

        // SuperDad Achievements and Timeline Logic
        let currentStage = 'preparation';
        let currentAchievements = [];
        const timelineItems = document.querySelectorAll('.timeline-item');
        const timelinePanel = document.getElementById('timeline-panel');
        const stageTitle = document.getElementById('stage-title');
        const stageContent = document.getElementById('stage-content');
        const closePanel = document.getElementById('close-panel');
        const progressMessage = document.getElementById('progress-message');
        const progressFill = document.getElementById('progress-fill');

        const stages = {
            preparation: {
                title: "Preparation",
                content: `
                    <p>Get ready to be an amazing father before challenges arise.</p>
                    <ul>
                        <li><a href="training.html">Take a Co-Parenting Course</a></li>
                        <li><a href="community.html">Consult Elders & Family</a></li>
                        <li><a href="resources.html">Talk to Professionals</a></li>
                    </ul>
                    <div class="achievement">Achievement: Ready Dad</div>
                `,
                achievement: "Ready Dad",
                progress: 25
            },
            family: {
                title: "Family",
                content: `
                    <p>Lean on your extended family—uncles, grandfathers, and relatives—for wisdom.</p>
                    <ul>
                        <li><a href="templates/Family_Mediation_Plan.html">Family Mediation Plan</a></li>
                        <li><a href="community.html">Organize a Family Meeting</a></li>
                    </ul>
                    <div class="achievement">Achievement: Family Dad</div>
                `,
                achievement: "Family Dad",
                progress: 50
            },
            action: {
                title: "Action",
                content: `
                    <p>Take proactive steps with Flamea’s tools to stay ahead.</p>
                    <ul>
                        <li><a href="templates/Parenting_Plan_Template.html">Parenting Plan Template</a></li>
                        <li><a href="templates/Child_Support_Agreement.html">Child Support Agreement</a></li>
                    </ul>
                    <div class="achievement">Achievement: Action Dad</div>
                `,
                achievement: "Action Dad",
                progress: 75
            },
            resolution: {
                title: "Resolution",
                content: `
                    <p>Even if things go wrong, honest communication can save the day for your child.</p>
                    <ul>
                        <li><a href="training.html">Conflict Resolution Course</a></li>
                        <li><a href="templates/Resolution_Agreement.html">Resolution Agreement</a></li>
                    </ul>
                    <div class="achievement">Achievement: SuperDad</div>
                `,
                achievement: "SuperDad",
                progress: 100
            }
        };

        function updateProgress() {
            if (!currentAchievements.includes(stages[currentStage].achievement)) {
                currentAchievements.push(stages[currentStage].achievement);
            }
            progressFill.style.width = `${stages[currentStage].progress}%`;
            progressMessage.textContent = `You’re on your way to SuperDad! Current Achievement: ${stages[currentStage].achievement}`;
        }

        timelineItems.forEach(item => {
            item.addEventListener('click', () => {
                currentStage = item.getAttribute('data-stage');
                stageTitle.textContent = stages[currentStage].title;
                stageContent.innerHTML = stages[currentStage].content;
                timelinePanel.classList.add('active');
                updateProgress();
            });
        });

        closePanel.addEventListener('click', () => {
            timelinePanel.classList.remove('active');
        });

        // Load saved progress for members
        auth.onAuthStateChanged((user) => {
            if (user) {
                db.collection('users').doc(user.uid).get().then((doc) => {
                    if (doc.exists && doc.data().superdadProgress) {
                        currentStage = doc.data().superdadProgress.stage;
                        currentAchievements = doc.data().superdadProgress.achievements;
                        updateProgress();
                    }
                });
            }
        });
    </script>
</body>
</html>